(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02429a20"],{"12a3":function(e,t,a){},"4c7a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.userFn},model:{value:e.userParams.query,callback:function(t){e.$set(e.userParams,"query",t)},expression:"userParams.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.userFn},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")])],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[a("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"180"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色",width:"180"}}),a("el-table-column",{attrs:{prop:"mg_state",label:"状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(a){return e.changeState(t.row.id,t.row.mg_state)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),a("el-table-column",{attrs:{prop:"mg_state",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{enterable:!1,content:"编辑",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){e.editDialogFormVisible=!0,e.updata(t.row.id)}}})],1),a("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editRuleForm.username,callback:function(t){e.$set(e.editRuleForm,"username",t)},expression:"editRuleForm.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editRuleForm.email,callback:function(t){e.$set(e.editRuleForm,"email",t)},expression:"editRuleForm.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.editRuleForm.mobile,callback:function(t){e.$set(e.editRuleForm,"mobile",t)},expression:"editRuleForm.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updataCheng("editRuleForm")}}},[e._v("确 定")])],1)],1),a("el-tooltip",{attrs:{enterable:!1,content:"删除",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.del(t.row.id)}}})],1),a("el-tooltip",{attrs:{enterable:!1,content:"权限",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-message",circle:""}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.userParams.pagenum,"page-sizes":[1,2,3,15],"page-size":e.userParams.pagesize,layout:" total,sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)},l=[],s={name:"",data(){var e=(e,t,a)=>{let r=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[A-Za-z0-9_-]+)+$/;if(!t)return a(new Error("Email不能为空"));r.test(t)?a():a(new Error("请输入正确的Email"))},t=(e,t,a)=>{let r=/^1[3456789]\d{9}$/;if(!t)return a(new Error("Phone不能为空"));r.test(t)?a():a(new Error("请输入正确的手机号"))};return{totalNum:0,userParams:{query:"",pagenum:1,pagesize:2},value:"100",input3:"",tableData:[],dialogFormVisible:!1,editDialogFormVisible:!1,ruleForm:{username:"",password:"",email:"",mobile:""},editRuleForm:{username:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],email:[{validator:e,trigger:"blur"}],mobile:[{validator:t,trigger:"blur"}]}}},mounted(){this.userFn(),this.changeState()},computed:{},methods:{userFn(){this.$http.get(`https://www.liulongbin.top:8888/api/private/v1/users?query=${this.userParams.query}&pagenum=${this.userParams.pagenum}&pagesize=${this.userParams.pagesize}`).then(e=>{console.log(e.data.data),this.tableData=e.data.data.users,this.totalNum=e.data.data.total})},handleSizeChange(e){console.log(`每页 ${e} 条`),this.userParams.pagesize=e,this.userFn()},handleCurrentChange(e){console.log("当前页: "+e),this.userParams.pagenum=e,this.userFn()},changeState(e,t){this.$http.put(`https://www.liulongbin.top:8888/api/private/v1/users/${e}/state/${t}`).then(e=>{200==e.data.meta.status&&this.$message({type:"success",message:e.data.meta.msg}),console.log(e)})},submitForm(e){this.$refs[e].validate(e=>{this.$http.post("https://www.liulongbin.top:8888/api/private/v1/users",this.ruleForm).then(t=>{if(console.log(t),!e)return console.log("error submit!!"),!1;201==t.data.meta.status&&(this.$message({type:"success",message:t.data.meta.msg}),this.dialogFormVisible=!1,this.ruleForm={username:"",password:"",email:"",mobile:""},this.userFn())})})},resetForm(e){this.$refs[e].resetFields()},del(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message({type:"success",message:"删除成功!"}),this.$http.delete("https://www.liulongbin.top:8888/api/private/v1/users/"+e).then(e=>{console.log(e),this.userFn()})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},updata(e){this.$http.put("https://www.liulongbin.top:8888/api/private/v1/users/"+e).then(e=>{console.log(e),console.log(e.data.data),this.editRuleForm.username=e.data.data.username})},updataCheng(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;alert("submit!")})}}},o=s,i=(a("993f"),a("2877")),n=Object(i["a"])(o,r,l,!1,null,"7dca682a",null);t["default"]=n.exports},"993f":function(e,t,a){"use strict";var r=a("12a3"),l=a.n(r);l.a}}]);
//# sourceMappingURL=chunk-02429a20.a04522a9.js.map